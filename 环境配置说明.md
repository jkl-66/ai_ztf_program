# 环境配置说明

## 语音识别功能配置

本项目已集成阿里云语音识别功能，需要配置相关环境变量：

### 1. 创建 .env 文件

在项目根目录创建 `.env` 文件，添加以下内容：

```bash
# 阿里云语音识别配置
ALIBABA_CLOUD_ACCESS_KEY_ID=your_access_key_id_here
ALIBABA_CLOUD_ACCESS_KEY_SECRET=your_access_key_secret_here

# DeepSeek API配置（已有）
DEEPSEEK_API_KEY=your_deepseek_api_key_here
```

### 2. 阿里云密钥获取

1. 登录阿里云控制台
2. 进入访问控制RAM页面
3. 创建用户并获取AccessKey ID和AccessKey Secret
4. 为用户授权语音识别服务权限

### 3. 语音识别服务说明

- **支持格式**: WebM, MP3, WAV
- **识别语言**: 中文
- **备用方案**: 当阿里云服务不可用时，系统会使用模拟识别返回测试文本

### 4. 模拟识别

如果未配置阿里云密钥，系统会根据音频文件大小返回不同的模拟识别结果：
- 小文件(< 10KB): "你好，这是语音识别测试。"
- 中等文件(< 50KB): "你好，我想问一下关于邹韬奋的故事。"
- 大文件(> 50KB): "请详细介绍一下邹韬奋先生的主要事迹和贡献。"

### 5. 功能特性

- 前端录音 → 后端保存音频文件
- 语音识别 → 提取文字内容
- AI对话 → 基于识别文字生成回复
- 会话管理 → 自动创建和管理session

### 6. 使用方法

1. 在聊天界面点击麦克风按钮开始录音
2. 录音完成后点击发送按钮
3. 系统自动进行语音识别并返回AI回复
4. 识别的文字会显示在聊天记录中

### 7. 故障排除

- 如果语音识别失败，检查阿里云密钥配置
- 如果网络连接问题，系统会自动使用模拟识别
- 音频文件会保存在 `audio_files/` 目录下 